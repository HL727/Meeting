# Generated by Django 2.2.6 on 2020-09-17 14:50

from django.db import migrations, models
import django.db.models.deletion
import policy_rule.fields


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('provider', '0045_merge_20200625_1210'),
    ]

    operations = [
        migrations.CreateModel(
            name='PolicyRule',
            fields=[
                ('id', models.AutoField(auto_created=True, help_text='The primary key.', primary_key=True, serialize=False, verbose_name='ID')),
                ('enable', models.BooleanField(blank=True, help_text='Determines whether or not the rule is enabled. Any disabled rules still appear in the rules list but are ignored. Use this setting to test configuration changes, or to temporarily disable specific rules.')),
                ('name', models.CharField(help_text='The name used to refer to this Call Routing Rule. Maximum length: 250 characters.', max_length=250)),
                ('tag', models.CharField(help_text='A unique identifier used to track usage of this Call Routing Rule. Maximum length: 250 characters.', max_length=250)),
                ('description', models.CharField(help_text='A description of the Call Routing Rule. Maximum length: 250 characters.', max_length=250)),
                ('priority', models.IntegerField(help_text='The priority of this rule. Rules are checked in ascending priority order until the first matching rule is found, and it is then applied. Range: 1 to 200.')),
                ('match_incoming_calls', models.BooleanField(help_text='Applies this rule to incoming calls that have not been routed to a Virtual Meeting Room or Virtual Reception, and should be routed via the Pexip Distributed Gateway service.')),
                ('match_outgoing_calls', models.BooleanField(help_text='Applies this rule to outgoing calls placed from a conference service (e.g. when adding a participant to a Virtual Meeting Room) where Automatic routing has been selected.')),
                ('match_source_location', policy_rule.fields.NullableRemoteObjectRelationField(help_text='Applies the rule only if the incoming call is being handled by a Conferencing Node in the selected location or the outgoing call is being initiated from the selected location. To apply the rule regardless of the location, select Any Location.', null=True)),
                ('match_source_alias', models.CharField(blank=True, max_length=250)),
                ('match_incoming_only_if_registered', models.BooleanField(help_text='Only apply this rule to incoming calls from devices, videoconferencing endpoints, soft clients or Infinity Connect clients that are registered to Pexip Infinity.  Note that the call must also match one of the selected protocols below. Calls placed from non-registered clients or devices, or from the Infinity Connect Web App will not be routed by this rule if it is enabled.')),
                ('match_incoming_webrtc', models.BooleanField(help_text='Select whether this rule should apply to incoming calls from Infinity Connect clients (WebRTC / RTMP).')),
                ('match_incoming_sip', models.BooleanField(help_text='Select whether this rule should apply to incoming SIP calls.')),
                ('match_incoming_mssip', models.BooleanField(help_text='Select whether this rule should apply to incoming Lync / Skype for Business (MS-SIP) calls.')),
                ('match_incoming_h323', models.BooleanField(help_text='Select whether this rule should apply to incoming H.323 calls.')),
                ('match_string_full', models.BooleanField(help_text='This setting is for advanced use cases and will not normally be required. By default, Pexip Infinity matches against a parsed version of the destination alias, i.e. it ignores the URI scheme, any other parameters, and any host IP addresses. So, if the original alias is "sip:alice@example.com;transport=tls" for example, then by default the rule will match against "alice@example.com". Select this option to match against the full, unparsed alias instead.')),
                ('match_string', models.CharField(help_text='The regular expression that the destination alias (the alias that was dialed) is checked against to see if this rule applies to this call. Maximum length: 250 characters.', max_length=250)),
                ('replace_string', models.CharField(help_text='The regular expression string used to transform the originally dialed alias (if a match was found). Leave blank to leave the originally dialed alias unchanged. Maximum length: 250 characters.', max_length=250)),
                ('call_type', models.CharField(choices=[('audio', 'audio'), ('video', 'video'), ('video-only', 'video-only'), ('auto', 'auto')], help_text='Maximum media content of the call. The participant being called will not be able to escalate beyond the selected capability.', max_length=250)),
                ('max_callrate_in', models.PositiveIntegerField(help_text='This optional field allows you to limit the bandwidth of media being received by Pexip Infinity from each individual participant dialed in via this Call Routing Rule. Range: 128 to 8192.', null=True)),
                ('max_callrate_out', models.PositiveIntegerField(help_text='This optional field allows you to limit the bandwidth of media being sent by Pexip Infinity to each individual participant dialed out from this Call Routing Rule. Range: 128 to 8192.', null=True)),
                ('max_pixels_per_second', models.CharField(choices=[('sd', 'sd'), ('hd', 'hd'), ('fullhd', 'fullhd')], help_text='Sets the maximum call quality for each participant.', max_length=250, null=True)),
                ('crypto_mode', models.CharField(help_text='Controls the media encryption requirements for participants connecting to this service. Use global setting: Use the global media encryption setting (Platform > Global Settings). Required: All participants (including RTMP participants) must use media encryption. Best effort: Each participant will use media encryption if their device supports it, otherwise the connection will be unencrypted. No encryption: All H.323, SIP and MS-SIP participants must use unencrypted media. (RTMP participants will use encryption if their device supports it, otherwise the connection will be unencrypted.)', max_length=250)),
                ('ivr_theme', policy_rule.fields.NullableRemoteObjectRelationField(help_text='The theme for use with this service. If no theme is selected here, files from the theme that has been selected as the default (Platform > Global settings > Default theme) will be applied.', null=True)),
                ('called_device_type', models.CharField(choices=[('external', 'external'), ('registration', 'registration'), ('mssip_conference_id', 'mssip_conference_id'), ('mssip_server', 'mssip_server'), ('gms_conference', 'gms_conference'), ('teams_conference', 'teams_conference'), ('teams_user', 'teams_user')], help_text='The device or system to which the call is routed. The options are: Registered device or external system: routes the call to a matching registered device if it is currently registered, otherwise attempts to route the call via an external system such as a SIP proxy, Lync / Skype for Business server, H.323 gatekeeper or other gateway/ITSP. Registered devices only: routes the call to a matching registered device only (providing it is currently registered). Lync / Skype for Business meeting direct (Conference ID in dialed alias): routes the call via a Lync / Skype for Business server to a Lync / Skype for Business meeting. Note that the destination alias must be transformed into just a Lync / Skype for Business Conference ID. Lync / Skype for Business clients, or meetings via a Virtual Reception: routes the call via a Lync / Skype for Business server either to a Lync / Skype for Business client, or - for calls that have come via a Virtual Reception - to a Lync / Skype for Business meeting. For Lync / Skype for Business meetings via Virtual Reception routing, ensure that Match against full alias URI is selected and that the Destination alias regex match ends with .*. Google Meet meeting: routes the call to a Google Meet meeting. Microsoft Teams meeting: routes the call to a Microsoft Teams meeting.', max_length=250)),
                ('outgoing_location', policy_rule.fields.NullableRemoteObjectRelationField(help_text="When calling an external system, this forces the outgoing call to be handled by a Conferencing Node in a specific location. When calling a Lync / Skype for Business meeting, a Conferencing Node in this location will handle the outgoing call, and - for 'Lync / Skype for Business meeting direct' targets - perform the Conference ID lookup on the Lync / Skype for Business server. Select Automatic to allow Pexip Infinity to automatically select which Conferencing Node to use.", null=True)),
                ('outgoing_protocol', models.CharField(choices=[('h323', 'h323'), ('mssip', 'mssip'), ('sip', 'sip'), ('rtmp', 'rtmp'), ('gms', 'gms'), ('teams', 'teams')], help_text='When calling an external system, this is the protocol to use when placing the outbound call. Note that if the call is to a registered device, Pexip Infinity will instead use the protocol that the device used to make the registration.', max_length=250)),
                ('sip_proxy', policy_rule.fields.NullableRemoteObjectRelationField(help_text='When calling an external system, this is the SIP proxy to use for outbound SIP calls. Select Use DNS to try to use normal SIP resolution procedures to route the call.', null=True)),
                ('teams_proxy', policy_rule.fields.NullableRemoteObjectRelationField(help_text='The Teams Connector to use for the Teams meeting. If you do not specify anything, the Teams Connector associated with the outgoing location is used.', null=True)),
                ('gms_access_token', policy_rule.fields.NullableRemoteObjectRelationField(help_text='The access token to use when resolving Google Meet meeting codes.', null=True)),
                ('h323_gatekeeper', policy_rule.fields.NullableRemoteObjectRelationField(help_text='When calling an external system, this is the H.323 gatekeeper to use for outbound H.323 calls. Select Use DNS to try to use normal H.323 resolution procedures to route the call.', null=True)),
                ('mssip_proxy', policy_rule.fields.NullableRemoteObjectRelationField(help_text='When calling an external system, this is the Lync / Skype for Business server to use for outbound Lync / Skype for Business (MS-SIP) calls. Select Use DNS to try to use normal Lync / Skype for Business (MS-SIP) resolution procedures to route the call. When calling a Lync / Skype for Business meeting, this is the Lync / Skype for Business server to use for the Conference ID lookup and to place the call.', null=True)),
                ('stun_server', policy_rule.fields.NullableRemoteObjectRelationField(help_text='The STUN server to be used for outbound Lync / Skype for Business (MS-SIP) calls (where applicable).', null=True)),
                ('turn_server', policy_rule.fields.NullableRemoteObjectRelationField(help_text='The TURN server to be used for outbound Lync / Skype for Business (MS-SIP) calls (where applicable).', null=True)),
                ('external_participant_avatar_lookup', models.CharField(choices=[('default', 'default'), ('yes', 'yes'), ('no', 'no')], default='default', help_text='Determines whether or not avatars for external participants will be retrieved using the method appropriate for the external meeting type. You can use this option to override the global configuration setting.', max_length=250)),
                ('treat_as_trusted', models.BooleanField(default=False, help_text='This indicates the target of this routing rule will treat the caller as part of the target organization for trust purposes.')),
                ('cluster', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='provider.Cluster')),
            ],
        ),
    ]
